<!-- TerminalTariffs Component Template -->
<div class="terminal-tariffs-page">
  <div class="container-fluid">
    <!-- Data Table Section -->
    <div class="row">
      <div class="col-12">
        <ui-data-table
          [id]="'terminal-tariffs-grid'"
          [showFooter]="true"
          [page]="1"
          [columns]="tableColumns"
          [columnGroups]="columnGroups"
          [dataSource]="tableDataSource"
          [joinOptions]="joinOptions"
          [canViewDeleted]="true"
          [formFields]="formFields"
          [formTabs]="formTabs"
          [formLoadUrl]="formLoadUrl"
          [formFullscreen]="true"
          [formLoadRequest]="formLoadRequest"
          [formDataMapper]="formDataMapper"
          [onSave]="onSave"
          [onFormChange]="onFormChange"
          [selectable]="true"
          [pagination]="true"
          [pageSize]="10"
          [height]="'800px'"
          [recordHeight]="40"
          [showEmptyRows]="true"
          [fixedBody]="true"
          [advancedFilter]="true"
          [showRefresh]="true"
          [searchPlaceholder]="translate.instant('table.searchPlaceholder')"
          [recid]="'TariffID'"
          [selectType]="'row'"
          [multiSelect]="true"
          [multiSort]="true"
          [keyboard]="true"
          [liveSearch]="true"
          [reorderColumns]="false"
          [reorderRows]="false"
          [lineNumbers]="false"
          [expandColumn]="false"
          [nestedFields]="true"
          [columnTooltip]="'top'"
          [toolbar]="tableToolbarConfig"
          (rowClick)="onTableRowClick($event)"
          (rowDblClick)="onTableRowDblClick($event)"
          (rowSelect)="onTableRowSelect($event)"
          (advancedFilterChange)="onAdvancedFilterChange($event)"
          (refresh)="onTableRefresh()"
          (delete)="onTableDelete($event)"
          (add)="onTableAdd()"
          (edit)="onTableEdit($event)">
        </ui-data-table>
      </div>
    </div>
  </div>

  <!-- Toplu Kafeterya Tanımlama Modal -->
  <ui-modal
    [title]="'Toplu Kafeterya Tanımlama'"
    [show]="showBulkDefinitionModal"
    [size]="'md'"
    [closable]="true"
    [showFooter]="true"
    (showChange)="showBulkDefinitionModal = $event"
    (closed)="closeBulkDefinitionModal()"
    (confirm)="onBulkDefinitionSubmit()"
    (cancel)="closeBulkDefinitionModal()">
    <ui-form [formGroup]="bulkDefinitionForm" [showJsonOutput]="false">
      <ui-form-field>
        <label>Kafeterya Grup</label>
        <ui-select
          [options]="cafeteriaGroups"
          [placeholder]="'Kafeterya Grup seçin'"
          formControlName="CafeteriaGroupID">
        </ui-select>
      </ui-form-field>

      <ui-form-field>
        <label>Kafeterya Öğünü</label>
        <ui-select
          [options]="cafeteriaApplications"
          [placeholder]="'Kafeterya Öğünü seçin'"
          formControlName="CafeteriaApplicationID">
        </ui-select>
      </ui-form-field>

      <ui-form-field>
        <label>1. Geçiş</label>
        <ui-input
          type="number"
          [placeholder]="'1. Geçiş ücreti'"
          formControlName="FirstPassFee">
        </ui-input>
      </ui-form-field>

      <ui-form-field>
        <label>2. Geçiş</label>
        <ui-input
          type="number"
          [placeholder]="'2. Geçiş ücreti'"
          formControlName="SecondPassFee">
        </ui-input>
      </ui-form-field>

      <ui-form-field>
        <label>Günlük Limit (Kredi)</label>
        <ui-select
          [options]="dailyLimitOptions"
          [placeholder]="'Günlük Limit (Kredi) seçin'"
          formControlName="DailyLimitCredit">
        </ui-select>
      </ui-form-field>

      <ui-form-field>
        <label>Günlük Limit (Abone)</label>
        <ui-select
          [options]="dailyLimitOptions"
          [placeholder]="'Günlük Limit (Abone) seçin'"
          formControlName="DailyLimitBalance">
        </ui-select>
      </ui-form-field>
    </ui-form>
    
    <div slot="footer" class="modal-footer-buttons">
      <ui-button 
        variant="outline"
        (click)="closeBulkDefinitionModal()">
        {{ translate.instant('form.cancel') }}
      </ui-button>
      <ui-button 
        variant="secondary"
        (click)="onBulkDefinitionSubmit()">
        {{ translate.instant('form.save') }}
      </ui-button>
    </div>

  </ui-modal>

  <!-- Terminal Tarifesi Kopyala Modal -->
  <ui-modal
    [title]="'Terminal Tarifesi Kopyala'"
    [show]="showCopySettingsModal"
    [size]="'md'"
    [closable]="true"
    [showFooter]="true"
    (showChange)="showCopySettingsModal = $event"
    (closed)="closeCopySettingsModal()"
    (confirm)="onCopySettingsSubmit()"
    (cancel)="closeCopySettingsModal()">
    <ui-form [formGroup]="copySettingsForm" [showJsonOutput]="false">
      <ui-form-field>
        <label>Kaynak Okuyucu</label>
        <ui-select
          [options]="terminals"
          [placeholder]="'Kaynak Okuyucu seçin'"
          formControlName="SourceReaderID">
        </ui-select>
      </ui-form-field>

      <ui-form-field>
        <label>Hedef Okuyucu</label>
        <ui-select
          [options]="terminals"
          [placeholder]="'Hedef Okuyucu seçin'"
          formControlName="TargetReaderID">
        </ui-select>
      </ui-form-field>
    </ui-form>

    <div slot="footer" class="modal-footer-buttons">
      <ui-button 
        variant="outline"
        (click)="closeCopySettingsModal()">
        {{ translate.instant('form.cancel') }}
      </ui-button>
      <ui-button 
        variant="secondary"
        (click)="onCopySettingsSubmit()">
        {{ translate.instant('form.save') }}
      </ui-button>
    </div>
  </ui-modal>
</div>
