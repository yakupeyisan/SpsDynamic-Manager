<!-- Employee Component Template - Adapted from old app.component.html -->
<!-- NOTE: This template requires DataTableComponent (ui-data-table) to be created -->
<!-- The structure is ready but DataTableComponent needs to be implemented -->

<div class="employee-page">
  <div class="container-fluid">
    <!-- Data Table Section -->
    <div class="row">
      <div class="col-12">
        <ui-data-table
          [id]="'employees-grid'"
          [showFooter]="true"
          [page]="1"
          [columns]="tableColumns"
          [dataSource]="tableDataSource"
          [joinOptions]="joinOptions"
          [canViewDeleted]="true"
          [formFields]="formFields"
          [formTabs]="formTabs"
          [formLoadUrl]="formLoadUrl"
          [formFullscreen]="true"
          [formLoadRequest]="formLoadRequest"
          [formDataMapper]="formDataMapper"
          [imageUploadUrl]="imageUploadUrl"
          [imageField]="imageField"
          [imagePreviewUrl]="imagePreviewUrl"
          [onSave]="onSave"
          [onFormChange]="onFormChange"
          [getGridColumns]="getGridColumns"
          [getGridDataSource]="getGridDataSource"
          [selectable]="true"
          [pagination]="true"
          [pageSize]="10"
          [height]="'800px'"
          [recordHeight]="40"
          [showEmptyRows]="true"
          [fixedBody]="true"
          [advancedFilter]="true"
          [showRefresh]="true"
          [searchPlaceholder]="translate.instant('table.searchPlaceholder')"
          [recid]="'EmployeeID'"
          [selectType]="'row'"
          [multiSelect]="true"
          [multiSort]="true"
          [keyboard]="true"
          [liveSearch]="true"
          [reorderColumns]="false"
          [reorderRows]="false"
          [lineNumbers]="false"
          [expandColumn]="false"
          [nestedFields]="true"
          [columnTooltip]="'top'"
          [toolbar]="tableToolbarConfig"
          (rowClick)="onTableRowClick($event)"
          (rowDblClick)="onTableRowDblClick($event)"
          (rowSelect)="onTableRowSelect($event)"
          (contextMenu)="onTableContextMenu($event)"
          (columnClick)="onTableColumnClick($event)"
          (pictureClick)="onPictureClick($event)"
          (columnDblClick)="onTableColumnDblClick($event)"
          (columnContextMenu)="onTableColumnContextMenu($event)"
          (columnResize)="onTableColumnResize($event)"
          (mouseEnter)="onTableMouseEnter($event)"
          (mouseLeave)="onTableMouseLeave($event)"
          (focus)="onTableFocus()"
          (blur)="onTableBlur()"
          (copy)="onTableCopy($event)"
          (paste)="onTablePaste($event)"
          (advancedFilterChange)="onAdvancedFilterChange($event)"
          (refresh)="onTableRefresh()"
          (delete)="onTableDelete($event)"
          (add)="onTableAdd()"
          (edit)="onTableEdit($event)">
        </ui-data-table>
      </div>
    </div>
  </div>
</div>

<!-- Format Modal -->
<ui-modal
  [title]="translate.instant('card.format')"
  [show]="showFormatModal"
  [size]="'md'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="showFormatModal = $event"
  (closed)="closeFormatModal()">
  
  <!-- Modal Body: Reader List -->
  <div class="reader-list-container">
    <!-- Format Status Message -->
    <div *ngIf="isFormatting && formatStatusMessage" class="format-status-container">
      <div class="format-status-message" [style.color]="'red'">
        {{ formatStatusMessage }}
      </div>
    </div>
    
    <div *ngIf="isLoadingReaders" class="loading-container">
      <div class="spinner"></div>
      <p>{{ translate.instant('common.loading') }}</p>
    </div>
    
    <div *ngIf="!isLoadingReaders && readers.length === 0" class="empty-container">
      <p>{{ translate.instant('common.noData') }}</p>
    </div>
    
    <ul *ngIf="!isLoadingReaders && readers.length > 0" class="reader-list">
      <li 
        *ngFor="let reader of readers" 
        class="reader-item"
        [class.reader-connected]="getReaderStatus(reader) === 'connected'"
        [class.reader-disconnected]="getReaderStatus(reader) === 'disconnected'"
        [class.reader-checking]="getReaderStatus(reader) === 'checking'"
        [class.reader-selectable]="isReaderSelectable(reader)"
        (click)="onReaderItemClick(reader, $event)">
        <div class="reader-status-indicator">
          <span 
            class="status-dot"
            [class.status-connected]="getReaderStatus(reader) === 'connected'"
            [class.status-disconnected]="getReaderStatus(reader) === 'disconnected'"
            [class.status-checking]="getReaderStatus(reader) === 'checking'">
          </span>
        </div>
        <div class="reader-info">
          <span class="reader-name">{{ reader.ReaderName || reader.name || reader.Name || 'Reader ' + (reader.ReaderID || reader.id) }}</span>
          <div class="reader-details">
            <span *ngIf="reader.SerialNumber" class="reader-detail-item">
              <strong>Seri No:</strong> {{ reader.SerialNumber }}
            </span>
            <span *ngIf="reader.IpAddress" class="reader-detail-item">
              <strong>IP:</strong> {{ reader.IpAddress }}
            </span>
            <span *ngIf="reader.ReaderType" class="reader-detail-item">
              <strong>Tip:</strong> {{ reader.ReaderType }}
            </span>
            <span *ngIf="reader.ReaderPort" class="reader-detail-item">
              <strong>Port:</strong> {{ reader.ReaderPort }}
            </span>
            <span *ngIf="getReaderMessage(reader)" class="reader-detail-item reader-message">
              <strong>Durum:</strong> {{ getReaderMessage(reader) }}
            </span>
          </div>
        </div>
        <span class="reader-id">ID: {{ reader.ReaderID || reader.id }}</span>
      </li>
    </ul>
  </div>
  
  <!-- Modal Footer -->
  <div slot="footer" class="modal-footer-actions">
    <button 
      *ngIf="!isFormatting"
      type="button" 
      class="btn btn-secondary"
      (click)="closeFormatModal()">
      {{ translate.instant('common.cancel') }}
    </button>
    <button 
      *ngIf="isFormatting"
      type="button" 
      class="btn btn-danger"
      (click)="formatWebSocket(false); closeFormatModal()">
      Durdur
    </button>
  </div>
</ui-modal>

<!-- Close and Clone Modal -->
<ui-modal
  title="Kartı Kapat ve Yeni Ekle"
  [show]="showCloseAndCloneModal"
  [size]="'md'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="showCloseAndCloneModal = $event"
  (closed)="closeCloseAndCloneModal()">
  
  <!-- Modal Body -->
  <div style="padding: 1.5rem;">
    <!-- Warning Alert -->
    <div style="background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 6px; padding: 1rem; margin-bottom: 1.5rem; display: flex; align-items: flex-start; gap: 0.75rem;">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" style="flex-shrink: 0; margin-top: 2px;">
        <path d="M10 2C5.58 2 2 5.58 2 10C2 14.42 5.58 18 10 18C14.42 18 18 14.42 18 10C18 5.58 14.42 2 10 2ZM10 14C9.45 14 9 13.55 9 13C9 12.45 9.45 12 10 12C10.55 12 11 12.45 11 13C11 13.55 10.55 14 10 14ZM11 10H9V6H11V10Z" fill="#856404"/>
      </svg>
      <div style="flex: 1;">
        <p style="margin: 0; color: #856404; font-weight: 500; font-size: 0.95rem; line-height: 1.5;">
          <strong>Uyarı:</strong> Seçtiğiniz kart kapatılacaktır ve birebir aynı özelliklere sahip yeni kart türetilecektir.
        </p>
      </div>
    </div>
    
    <!-- Required Field -->
    <div style="margin-bottom: 0;">
      <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">
        Eski Kartın Kapatılma Sebebi <span style="color: #dc3545;">*</span>
      </label>
      <textarea
        [(ngModel)]="closeAndCloneCardDesc"
        placeholder="Eski kartın neden kapatıldığını açıklayınız (zorunlu)"
        required
        style="width: 100%; min-height: 120px; padding: 0.75rem; border: 1px solid #ced4da; border-radius: 6px; font-family: inherit; font-size: 0.95rem; resize: vertical;"
        [class.is-invalid]="closeAndCloneCardDescError"
        rows="4">
      </textarea>
      <div *ngIf="closeAndCloneCardDescError" style="color: #dc3545; font-size: 0.875rem; margin-top: 0.5rem;">
        Eski kartın kapatılma sebebi zorunludur.
      </div>
    </div>
  </div>
  
  <!-- Modal Footer -->
  <div slot="footer" style="display: flex; justify-content: flex-end; gap: 0.75rem; padding: 1rem 1.5rem; border-top: 1px solid #e9ecef;">
    <button 
      type="button" 
      class="btn btn-secondary"
      style="padding: 0.5rem 1.25rem; border: 1px solid #6c757d; background-color: #6c757d; color: white; border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s;"
      (click)="closeCloseAndCloneModal()"
      onmouseover="this.style.backgroundColor='#5a6268'; this.style.borderColor='#5a6268'"
      onmouseout="this.style.backgroundColor='#6c757d'; this.style.borderColor='#6c757d'">
      İptal
    </button>
    <button 
      type="button" 
      class="btn btn-primary"
      style="padding: 0.5rem 1.25rem; border: 1px solid #007bff; background-color: #007bff; color: white; border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s;"
      (click)="submitCloseAndClone()"
      onmouseover="this.style.backgroundColor='#0056b3'; this.style.borderColor='#0056b3'"
      onmouseout="this.style.backgroundColor='#007bff'; this.style.borderColor='#007bff'">
      Onayla
    </button>
  </div>
</ui-modal>

<!-- Bulk Department Change Modal -->
<ui-modal
  [show]="showBulkDepartmentModal"
  [title]="'Toplu Departman Değişimi'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkDepartmentModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların departmanları değiştirilecektir. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForDepartment.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForDepartment; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Department Selection Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-building me-2"></i>
        <span class="cancel-section-title">Yeni Departman</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <ui-select
        [(ngModel)]="selectedDepartmentIds"
        [options]="getDepartmentOptions()"
        [placeholder]="'Departman seçiniz...'"
        [disabled]="isUpdatingDepartment"
        [required]="true"
        [multiple]="true">
      </ui-select>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Seçili çalışanların tümü seçilen departmanlara atanacaktır.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkDepartmentModal()"
      [disabled]="isUpdatingDepartment">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkDepartment()"
      [disabled]="isUpdatingDepartment || !selectedDepartmentIds || selectedDepartmentIds.length === 0">
      <span *ngIf="isUpdatingDepartment" class="cancel-spinner me-2"></span>
      <i *ngIf="!isUpdatingDepartment" class="ti ti-check me-1"></i>
      Onayla ve Güncelle
    </button>
  </div>
</ui-modal>

<!-- Bulk Access Group Change Modal -->
<ui-modal
  [show]="showBulkAccessGroupModal"
  [title]="'Toplu Yetki Grubu Değişimi'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkAccessGroupModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların yetki grupları değiştirilecektir. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForAccessGroup.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForAccessGroup; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Access Group Selection Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-shield me-2"></i>
        <span class="cancel-section-title">Yeni Yetki Grubu</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <ui-select
        [(ngModel)]="selectedAccessGroupIds"
        [options]="getAccessGroupOptions()"
        [placeholder]="'Yetki grubu seçiniz...'"
        [disabled]="isUpdatingAccessGroup"
        [required]="true"
        [multiple]="true">
      </ui-select>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Seçili çalışanların tümü seçilen yetki gruplarına atanacaktır.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkAccessGroupModal()"
      [disabled]="isUpdatingAccessGroup">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkAccessGroup()"
      [disabled]="isUpdatingAccessGroup || !selectedAccessGroupIds || selectedAccessGroupIds.length === 0">
      <span *ngIf="isUpdatingAccessGroup" class="cancel-spinner me-2"></span>
      <i *ngIf="!isUpdatingAccessGroup" class="ti ti-check me-1"></i>
      Onayla ve Güncelle
    </button>
  </div>
</ui-modal>

<!-- Bulk Company Change Modal -->
<ui-modal
  [show]="showBulkCompanyModal"
  [title]="'Toplu Firma Değişimi'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkCompanyModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların firmaları değiştirilecektir. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForCompany.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForCompany; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Company Selection Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-building me-2"></i>
        <span class="cancel-section-title">Yeni Firma</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <ui-select
        [(ngModel)]="selectedCompanyId"
        [options]="getCompanyOptions()"
        [placeholder]="'Firma seçiniz...'"
        [disabled]="isUpdatingCompany"
        [required]="true">
      </ui-select>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Seçili çalışanların tümü bu firmaya atanacaktır.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkCompanyModal()"
      [disabled]="isUpdatingCompany">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkCompany()"
      [disabled]="isUpdatingCompany || !selectedCompanyId">
      <span *ngIf="isUpdatingCompany" class="cancel-spinner me-2"></span>
      <i *ngIf="!isUpdatingCompany" class="ti ti-check me-1"></i>
      Onayla ve Güncelle
    </button>
  </div>
</ui-modal>

<!-- Bulk Position (Kadro) Change Modal -->
<ui-modal
  [show]="showBulkPositionModal"
  [title]="'Toplu Kadro Değişimi'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkPositionModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların kadroları değiştirilecektir. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForPosition.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForPosition; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Position Selection Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-briefcase me-2"></i>
        <span class="cancel-section-title">Yeni Kadro</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <ui-select
        [(ngModel)]="selectedPositionId"
        [options]="getPositionOptions()"
        [placeholder]="'Kadro seçiniz...'"
        [disabled]="isUpdatingPosition"
        [required]="true">
      </ui-select>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Seçili çalışanların tümü bu kadroya atanacaktır.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkPositionModal()"
      [disabled]="isUpdatingPosition">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkPosition()"
      [disabled]="isUpdatingPosition || !selectedPositionId">
      <span *ngIf="isUpdatingPosition" class="cancel-spinner me-2"></span>
      <i *ngIf="!isUpdatingPosition" class="ti ti-check me-1"></i>
      Onayla ve Güncelle
    </button>
  </div>
</ui-modal>

<!-- Bulk Scoring Modal -->
<ui-modal
  [show]="showBulkScoringModal"
  [title]="'Toplu Puantaj Tanımlama'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkScoringModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların puantaj bilgisi güncellenecektir. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForScoring.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForScoring; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scoring Toggle Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-clipboard-check me-2"></i>
        <span class="cancel-section-title">Puantaj Durumu</span>
      </div>
      <div style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0;">
        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer; user-select: none;">
          <input 
            type="checkbox" 
            [(ngModel)]="scoringEnabled"
            [disabled]="isUpdatingScoring"
            style="width: 18px; height: 18px; cursor: pointer;">
          <span style="font-weight: 500;">Puantaj Aktif</span>
        </label>
      </div>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>İşaretli olduğunda seçili çalışanlar için puantaj aktif edilir, kaldırıldığında pasif edilir.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkScoringModal()"
      [disabled]="isUpdatingScoring">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkScoring()"
      [disabled]="isUpdatingScoring || selectedEmployeesForScoring.length === 0">
      <span *ngIf="isUpdatingScoring" class="cancel-spinner me-2"></span>
      <i *ngIf="!isUpdatingScoring" class="ti ti-check me-1"></i>
      Onayla ve Güncelle
    </button>
  </div>
</ui-modal>

<!-- Bulk QR Card Create Modal -->
<ui-modal
  [show]="showBulkQrCardCreateModal"
  [title]="'Toplu Qr Kart Oluşturma'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkQrCardCreateModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanlar için QR kartlar oluşturulacaktır. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForQrCardCreate.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForQrCardCreate; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkQrCardCreateModal()"
      [disabled]="isCreatingQrCards">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkQrCardCreate()"
      [disabled]="isCreatingQrCards || selectedEmployeesForQrCardCreate.length === 0">
      <span *ngIf="isCreatingQrCards" class="cancel-spinner me-2"></span>
      <i *ngIf="!isCreatingQrCards" class="ti ti-check me-1"></i>
      Onayla ve Oluştur
    </button>
  </div>
</ui-modal>

<!-- Bulk QR Card Close Modal -->
<ui-modal
  [show]="showBulkQrCardCloseModal"
  [title]="'Toplu Qr Kart Kapatma'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkQrCardCloseModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların QR kartları kapatılacaktır. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForQrCardClose.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForQrCardClose; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkQrCardCloseModal()"
      [disabled]="isClosingQrCards">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkQrCardClose()"
      [disabled]="isClosingQrCards || selectedEmployeesForQrCardClose.length === 0">
      <span *ngIf="isClosingQrCards" class="cancel-spinner me-2"></span>
      <i *ngIf="!isClosingQrCards" class="ti ti-check me-1"></i>
      Onayla ve Kapat
    </button>
  </div>
</ui-modal>

<!-- Bulk Web Client Access Modal -->
<ui-modal
  [show]="showBulkWebClientModal"
  [title]="'Toplu Web Client Erişim Tanımlama'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkWebClientModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların Web Client erişimleri tanımlanacaktır. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForWebClient.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForWebClient; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Web Client Toggle Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-toggle-left me-2"></i>
        <span class="cancel-section-title">Web Client Erişimi</span>
      </div>
      <div style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0;">
        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer; user-select: none;">
          <input 
            type="checkbox" 
            [(ngModel)]="webClientEnabled"
            [disabled]="isUpdatingWebClient"
            style="width: 18px; height: 18px; cursor: pointer;">
          <span style="font-weight: 500;">Web Client Erişim Yetkisi</span>
        </label>
      </div>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Web Client erişimi açık olduğunda yetki seçimi zorunludur.</span>
      </div>
    </div>
    
    <!-- Web Client Authorization Selection Section -->
    <div class="cancel-section" *ngIf="webClientEnabled">
      <div class="cancel-section-header">
        <i class="ti ti-shield me-2"></i>
        <span class="cancel-section-title">Web Client Yetki</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <ui-select
        [(ngModel)]="selectedWebClientAuthorizationId"
        [options]="getWebClientAuthorizationOptions()"
        [placeholder]="'Yetki seçiniz...'"
        [disabled]="isUpdatingWebClient"
        [required]="true">
      </ui-select>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Seçili çalışanların tümü bu yetkiye sahip olacaktır.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkWebClientModal()"
      [disabled]="isUpdatingWebClient">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkWebClient()"
      [disabled]="isUpdatingWebClient || (webClientEnabled && !selectedWebClientAuthorizationId)">
      <span *ngIf="isUpdatingWebClient" class="cancel-spinner me-2"></span>
      <i *ngIf="!isUpdatingWebClient" class="ti ti-check me-1"></i>
      Onayla ve Güncelle
    </button>
  </div>
</ui-modal>

<!-- Bulk Password Reset Modal -->
<ui-modal
  [show]="showBulkPasswordResetModal"
  [title]="'Toplu Şifre Sıfırlama'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkPasswordResetModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Uyarı:</strong> Seçili çalışanların şifreleri sıfırlanacaktır. Onaylıyor musunuz?
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForPasswordReset.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForPasswordReset; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['IdentificationNumber']" class="selected-event-row">
              <span class="selected-event-label">TC Kimlik:</span>
              <span class="selected-event-value">{{ employee['IdentificationNumber'] }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkPasswordResetModal()"
      [disabled]="isResettingPassword">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkPasswordReset()"
      [disabled]="isResettingPassword || selectedEmployeesForPasswordReset.length === 0">
      <span *ngIf="isResettingPassword" class="cancel-spinner me-2"></span>
      <i *ngIf="!isResettingPassword" class="ti ti-check me-1"></i>
      Onayla ve Sıfırla
    </button>
  </div>
</ui-modal>

<!-- Bulk SMS Modal -->
<ui-modal
  [show]="showBulkSmsModal"
  [title]="'Toplu SMS Gönderimi'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkSmsModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Bilgi:</strong> Seçili çalışanlara SMS gönderilecektir. Eğer kişinin telefon numarası tanımlı ise gönderim yapılacaktır.
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForSms.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForSms; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['MobilePhone1'] || employee['MobilePhone2']" class="selected-event-row">
              <span class="selected-event-label">Telefon:</span>
              <span class="selected-event-value">{{ employee['MobilePhone1'] || employee['MobilePhone2'] || '-' }}</span>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="getEmployeesWithPhoneCount() > 0" class="cancel-description-hint" style="margin-top: 0.75rem;">
        <i class="ti ti-info-circle"></i>
        <span>{{ getEmployeesWithPhoneCount() }} çalışanın telefon numarası tanımlı. SMS gönderilecek.</span>
      </div>
      <div *ngIf="getEmployeesWithPhoneCount() === 0" class="cancel-description-hint" style="margin-top: 0.75rem; color: #dc3545;">
        <i class="ti ti-alert-circle"></i>
        <span>Seçili çalışanlardan hiçbirinde telefon numarası tanımlı değil.</span>
      </div>
    </div>
    
    <!-- SMS Message Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-message me-2"></i>
        <span class="cancel-section-title">SMS Mesajı</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <textarea 
        class="cancel-description-textarea" 
        rows="6"
        [(ngModel)]="smsMessage"
        placeholder="SMS mesajınızı giriniz..."
        [disabled]="isSendingSms"
        required
        style="width: 100%; min-height: 150px; padding: 0.75rem; border: 1px solid #ced4da; border-radius: 6px; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Mesaj uzunluğu SMS karakter limitine göre kontrol edilecektir.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkSmsModal()"
      [disabled]="isSendingSms">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkSms()"
      [disabled]="isSendingSms || !smsMessage || smsMessage.trim() === '' || getEmployeesWithPhoneCount() === 0">
      <span *ngIf="isSendingSms" class="cancel-spinner me-2"></span>
      <i *ngIf="!isSendingSms" class="ti ti-send me-1"></i>
      Gönder
    </button>
  </div>
</ui-modal>

<!-- Bulk Mail Modal -->
<ui-modal
  [show]="showBulkMailModal"
  [title]="'Toplu Mail Gönderimi'"
  [size]="'lg'"
  [closable]="true"
  [showFooter]="true"
  (showChange)="onBulkMailModalChange($event)">
  <div class="cancel-confirmation-content">
    <!-- Warning Alert -->
    <div class="cancel-warning-alert">
      <div class="cancel-warning-icon">
        <i class="ti ti-alert-triangle"></i>
      </div>
      <div class="cancel-warning-text">
        <strong>Bilgi:</strong> Seçili çalışanlara mail gönderilecektir. Eğer kişinin e-posta adresi tanımlı ise gönderim yapılacaktır.
      </div>
    </div>
    
    <!-- Selected Records Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-list-check me-2"></i>
        <span class="cancel-section-title">Seçili Çalışanlar</span>
        <span class="cancel-section-badge">{{ selectedEmployeesForMail.length }}</span>
      </div>
      <div class="selected-events-list">
        <div 
          *ngFor="let employee of selectedEmployeesForMail; let i = index" 
          class="selected-event-item">
          <div class="selected-event-number">{{ i + 1 }}</div>
          <div class="selected-event-content">
            <div class="selected-event-row">
              <span class="selected-event-label">Çalışan ID:</span>
              <span class="selected-event-value">{{ employee['EmployeeID'] || employee['recid'] || employee['id'] }}</span>
            </div>
            <div *ngIf="employee['Name'] || employee['SurName']" class="selected-event-row">
              <span class="selected-event-label">Ad Soyad:</span>
              <span class="selected-event-value">{{ employee['Name'] || '' }} {{ employee['SurName'] || '' }}</span>
            </div>
            <div *ngIf="employee['Mail']" class="selected-event-row">
              <span class="selected-event-label">E-posta:</span>
              <span class="selected-event-value">{{ employee['Mail'] || '-' }}</span>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="getEmployeesWithEmailCount() > 0" class="cancel-description-hint" style="margin-top: 0.75rem;">
        <i class="ti ti-info-circle"></i>
        <span>{{ getEmployeesWithEmailCount() }} çalışanın e-posta adresi tanımlı. Mail gönderilecek.</span>
      </div>
      <div *ngIf="getEmployeesWithEmailCount() === 0" class="cancel-description-hint" style="margin-top: 0.75rem; color: #dc3545;">
        <i class="ti ti-alert-circle"></i>
        <span>Seçili çalışanlardan hiçbirinde e-posta adresi tanımlı değil.</span>
      </div>
    </div>
    
    <!-- Mail Subject Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-mail me-2"></i>
        <span class="cancel-section-title">Mail Konusu</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <input 
        type="text"
        class="cancel-description-textarea"
        [(ngModel)]="mailSubject"
        placeholder="Mail konusunu giriniz..."
        [disabled]="isSendingMail"
        required
        style="width: 100%; padding: 0.75rem; border: 1px solid #ced4da; border-radius: 6px; font-family: inherit; font-size: 0.95rem;">
    </div>
    
    <!-- Mail Message Section -->
    <div class="cancel-section">
      <div class="cancel-section-header">
        <i class="ti ti-file-text me-2"></i>
        <span class="cancel-section-title">Mail Mesajı</span>
        <span class="text-danger ms-1">*</span>
      </div>
      <textarea 
        class="cancel-description-textarea" 
        rows="8"
        [(ngModel)]="mailMessage"
        placeholder="Mail mesajınızı giriniz..."
        [disabled]="isSendingMail"
        required
        style="width: 100%; min-height: 200px; padding: 0.75rem; border: 1px solid #ced4da; border-radius: 6px; font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
      <div class="cancel-description-hint">
        <i class="ti ti-info-circle"></i>
        <span>Mail mesajı HTML formatında gönderilebilir.</span>
      </div>
    </div>
  </div>
  
  <div slot="footer" class="cancel-modal-footer">
    <button 
      type="button" 
      class="cancel-btn cancel-btn-secondary" 
      (click)="closeBulkMailModal()"
      [disabled]="isSendingMail">
      <i class="ti ti-x me-1"></i>
      Vazgeç
    </button>
    <button 
      type="button" 
      class="cancel-btn cancel-btn-primary" 
      (click)="onConfirmBulkMail()"
      [disabled]="isSendingMail || !mailSubject || mailSubject.trim() === '' || !mailMessage || mailMessage.trim() === '' || getEmployeesWithEmailCount() === 0">
      <span *ngIf="isSendingMail" class="cancel-spinner me-2"></span>
      <i *ngIf="!isSendingMail" class="ti ti-send me-1"></i>
      Gönder
    </button>
  </div>
</ui-modal>