@if (show) {
  <div [class]="backdropClasses" (click)="onBackdropClick($event)">
    <div [class]="modalClasses" (click)="$event.stopPropagation()">
      <div class="ui-modal-content">
        <!-- Header -->
        @if (title || closable || allowFullscreen) {
          <div class="ui-modal-header">
            @if (title) {
              <h3 class="ui-modal-title">{{ title }}</h3>
            }
            <div class="ui-modal-header-actions">
              @if (allowFullscreen) {
                <button
                  type="button"
                  class="ui-modal-fullscreen-toggle"
                  (click)="toggleFullscreen()"
                  [attr.aria-label]="isFullscreen ? 'Exit fullscreen' : 'Enter fullscreen'"
                  [title]="isFullscreen ? 'Exit fullscreen' : 'Enter fullscreen'">
                  @if (!isFullscreen) {
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
                    </svg>
                  }
                  @if (isFullscreen) {
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>
                    </svg>
                  }
                </button>
              }
              @if (closable) {
                <button
                  type="button"
                  class="ui-modal-close"
                  (click)="close()"
                  aria-label="Close">
                  Ã—
                </button>
              }
            </div>
          </div>
        }
        
        <!-- Body -->
        <div #modalBody class="ui-modal-body">
          <ng-content select=":not([slot=footer])"></ng-content>
        </div>
        
        <!-- Footer -->
        @if (showFooter) {
          <div class="ui-modal-footer">
            <ng-content select="[slot=footer]"></ng-content>
          </div>
        }
      </div>
    </div>
  </div>
}

